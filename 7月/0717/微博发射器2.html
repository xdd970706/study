<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        .warp{
            width: 500px;
            height: 300px;
            margin: 50px auto;
            padding: 10px 0;

        }
        #show{
            width: 200px;
            height: 200px;
            border: 1px solid;
            padding: 10px;
        }
        textarea{
            resize: none;
            width: 200px;
        }
        p{
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            
        }
        a{
            display: inline-block;
            width: 30px;
            height: 20px;
            font-size: 12px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="warp">
        <textarea></textarea>
        <button onclick="Message.add()">添加</button>
        <div id="show"></div>
    </div>
    <script>
        var showBox = document.getElementById('show');
        var text = document.querySelector('textarea');
        var Message = {
            messageArr:[],         
            add:function(){
                if(text.value!==''){
                var messageP = document.createElement('p');
                var delA =  document.createElement('a');
                delA.innerHTML = "删除"
                messageP.innerHTML = text.value
                messageP.appendChild(delA)
                Message.messageArr.push(messageP);
                text.value=""
                Message.show()
                }else{
                    alert("输入框为空!")
                }
            },
            show:function(){
                Message.messageArr.reverse().forEach((item,index)=>{
                    showBox.appendChild(item)
                })
                var aArr = document.getElementsByTagName('a');
                var pArr = document.getElementsByTagName('p');
                // for(var i = 0;i<aArr.length;i++){
                //     aArr[i].setAttribute("index",i)
                //     aArr[i].onclick = function(){
                //         // console.log(this.getAttribute('index'))
                //         Message.messageArr.splice(this.getAttribute('index'),1)
                //         showBox.removeChild(pArr[this.getAttribute('index')])
                //     }
                // }
                [].forEach.call(aArr,(item,index)=>{
                    item.onclick = function(){
                        // console.log(index)
                        Message.messageArr.splice(index,1)
                        showBox.removeChild(pArr[index])
                        Message.show()
                    }
                })
            },
        }
            
    </script>
</body>
</html>